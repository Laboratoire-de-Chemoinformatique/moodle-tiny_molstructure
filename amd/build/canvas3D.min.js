define("tiny_molstructure/canvas3D",["exports","tiny_molstructure/selectors","core/str","tiny_molstructure/common"],(function(_exports,_selectors,_str,_common){var obj;
/**
   * Tiny Molstructure canvas init and functions.
   *
   * @module      tiny_molstructure/ui
   * @copyright   2024 University of Strasbourg unistra.fr
   * @author Céline Pervès <louis.plyer@unistra.fr>
   * @author Louis Plyer <louis.plyer@unistra.fr>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initCanvas3D=_exports.function_resize=_exports.changeLangString=void 0,_selectors=(obj=_selectors)&&obj.__esModule?obj:{default:obj};_exports.initCanvas3D=async function(editor,iframeBody){let sketcherWidth=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400,sketcherHeight=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200,sketcherViewerWidth=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,sketcherViewerHeight=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;const iframeContent=iframeBody.contentDocument;let ChemDoodle=iframeBody.contentWindow.ChemDoodleVar;ChemDoodle.ELEMENT.H.jmolColor="black",ChemDoodle.ELEMENT.S.jmolColor="#B9A130";const sketcher=new ChemDoodle.SketcherCanvas("sketcher",sketcherWidth,sketcherHeight,{useServices:!1,requireStartingAtom:!1});ChemDoodle.readJSON('{"m":[{"a":[]}]}'),sketcher.styles.atoms_displayTerminalCarbonLabels_2D=!0,sketcher.styles.atoms_useJMOLColors=!0,sketcher.styles.bonds_clearOverlaps_2D=!0,sketcher.repaint();const sketcher_viewer=new ChemDoodle.ViewerCanvas("sketcher-viewer-tiny",sketcherViewerWidth,sketcherViewerHeight);sketcher_viewer.styles.atoms_displayTerminalCarbonLabels_2D=!0,sketcher_viewer.styles.atoms_useJMOLColors=!0,sketcher_viewer.styles.bonds_clearOverlaps_2D=!0,sketcher_viewer.emptyMessage="No data loaded",sketcher.oldFunc=sketcher.checksOnAction,sketcher.checksOnAction=function(force){this.oldFunc(force);let mols=sketcher.molecules,forms=sketcher.shapes;sketcher_viewer.loadContent(mols,forms),sketcher.center();for(let i=0,ii=this.molecules.length;i<ii;i++)this.molecules[i].check()},iframeBody.contentWindow.sketcherViewerVar=sketcher_viewer,iframeContent.querySelector(_selectors.default.elements.canvas.resizeButton).addEventListener("click",function_resize,iframeBody),window.document.querySelector(".modal-content").setAttribute("style"," height:100vh;"),await changeLangString(iframeContent)};const function_resize=e=>{const iframeContent=e.target.ownerDocument;let width,height,input_width=iframeContent.querySelector(_selectors.default.elements.canvas.widthInput).valueAsNumber,input_height=iframeContent.querySelector(_selectors.default.elements.canvas.heightInput).valueAsNumber;width=input_width>0?input_width:100,height=input_height>0?input_height:100,window.document.querySelector(_selectors.default.elements.canvas.selector3D).contentWindow.sketcherViewerVar.resize(width,height)};_exports.function_resize=function_resize;const changeLangString=async iframeContent=>{iframeContent.querySelector(_selectors.default.elements.canvas.resizeButton).firstChild.data=await(0,_str.get_string)("resize",_common.component),iframeContent.querySelector(_selectors.default.elements.canvas.heightInputLabel).firstChild.data=await(0,_str.get_string)("height",_common.component),iframeContent.querySelector(_selectors.default.elements.canvas.widthInputLabel).firstChild.data=await(0,_str.get_string)("width",_common.component)};_exports.changeLangString=changeLangString}));

//# sourceMappingURL=canvas3D.min.js.map