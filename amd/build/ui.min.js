define("tiny_molstructure/ui",["exports","tiny_molstructure/modal","core/modal_factory","core/modal_events","tiny_molstructure/selectors","core/config","./ketcher","./canvas2D","./canvas3D"],(function(_exports,_modal,_modal_factory,_modal_events,_selectors,Config,_ketcher,_canvas2D,_canvas3D){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Tiny Molstructure UI.
   *
   * @module      tiny_molstructure/ui
   * @copyright   2024 University of Strasbourg unistra.fr
   * @author Céline Pervès <louis.plyer@unistra.fr>
   * @author Louis Plyer <louis.plyer@unistra.fr>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleAction=_exports.displayDialogue=void 0,_modal=_interopRequireDefault(_modal),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_selectors=_interopRequireDefault(_selectors),Config=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Config);_exports.handleAction=editor=>{displayDialogue(editor)};const displayDialogue=async editor=>{const modalPromises=await _modal_factory.default.create({type:_modal.default.TYPE,templateContext:getTemplateContext(editor,{}),large:!0});modalPromises.show();const root=await modalPromises.getRoot();const iframeBody2D=root[0].querySelector(_selectors.default.elements.canvas.selector2D);iframeBody2D.contentWindow.addEventListener("DOMContentLoaded",(function(){(0,_canvas2D.initCanvas2D)(editor,iframeBody2D)})),root.on(_modal_events.default.hidden,(e=>{if(e.target.closest(_selectors.default.actions.submit)){e.preventDefault();const currentFrame=window.document.querySelector(_selectors.default.elements.canvas.selector2D);(0,_ketcher.insertImage)(currentFrame,editor)}modalPromises.destroy()})),root.on(_modal_events.default.save,(e=>{e.preventDefault();const currentFrame=window.document.querySelector(_selectors.default.elements.canvas.selector2D);(0,_ketcher.insertImage)(currentFrame,editor),modalPromises.destroy()}))};_exports.displayDialogue=displayDialogue;const getTemplateContext=(editor,data)=>Object.assign({},{elementid:editor.id,wwwroot:Config.wwwroot},data)}));

//# sourceMappingURL=ui.min.js.map