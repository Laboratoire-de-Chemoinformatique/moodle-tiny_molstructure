define("tiny_molstructure/ketcher",["exports","tiny_molstructure/selectors","core/notification","core/ajax","editor_tiny/options","./options"],(function(_exports,_selectors,_notification,_ajax,_options,_options2){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * @module     tiny_molstructure/ketcher
   * @copyright   2024 University of Strasbourg unistra.fr
   * @author Céline Pervès <louis.plyer@unistra.fr>
   * @author Louis Plyer <louis.plyer@unistra.fr>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   * Visual Mathquill editor input instanciation
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.insertImage=_exports.createAnUploadImageFile=void 0,_selectors=_interopRequireDefault(_selectors),_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax);_exports.insertImage=async(iframeBody,editor)=>{let divContent="";const imgDataURL=iframeBody.contentDocument.querySelector(_selectors.default.elements.canvas.ketcherviewId).toDataURL("image/svg"),itemId=(0,_options.getDraftItemId)(editor);divContent='<img src="'+(await createAnUploadImageFile(itemId,imgDataURL,(0,_options2.getContextId)(editor))).fileUrl+'" alt="ChemDoodle PNG"/>',editor.insertContent(divContent)};const createAnUploadImageFile=async(itemId,imageDataUrl,contextId)=>await new Promise((resolve=>_ajax.default.call([{methodname:"tiny_molstructure_generate_store_image",args:{itemId:itemId,imageDataUrl:imageDataUrl,contextId:contextId},done:result=>{resolve(result)},fail:_notification.default.exception}])));_exports.createAnUploadImageFile=createAnUploadImageFile}));

//# sourceMappingURL=ketcher.min.js.map